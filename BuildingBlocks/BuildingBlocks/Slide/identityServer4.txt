server side app : asp.net mvc, php, redirect authorization code flow

spa single page application: Angular, React

https://www.codeproject.com/Articles/1171546/OAuth-Authorization-flows-explained-with-examples

Add Require Claims through Poilicy

=> AddPolicy to Add Required Claims

IdentityServer4:

Service to authen/ author 

1 service IS4 can used by serveral different microservices

Question:

IS4 write authen like server side app -> should we rewrite API to authen
that response like single page application?

Should we implement Required Claims for each API or the whole controller

In CQRS we dont have controller -> solutions for required authorize?

Catalog Service, Basket Service must implement IS4?
Or WebClient will implement IS4 to authen/ author?


Middleware

User gui request 

Client      EndPoint       Response

AuthenticationMiddleware